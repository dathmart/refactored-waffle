<!DOCTYPE html>
<html>

<head>
  <title>Refactored Waffle!!</title>
  <style type="text/css">
    table {
      width: 100%;
    }
    
    tbody tr:nth-child(odd) {
      background-color: #f4bcf4;
    }
    
    tbody tr:first-of-type {
      color: green;
    }
  </style>
</head>

<body>
  <div id="container">
    <input type="text" id="search" />
  </div>
  <script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    $(document).ready(() => {
      //window.alert('whee!');
      //console.log('yeeeeaaaaa');
      //console.error('wwwaaaat');

      var $container = $('#container');

      //debugger;

      const $table = $("<table></table>");
      const $thead = $("<thead></thead>");
      const $trHead = $("<tr></tr>");
      const $th = $("<th></th>")
    

      $table.attr("border", 2);
      $table.append($thead);
      $thead.append($trHead);
      $trHead.append($th);
      $th.text("County, Latitude, Longitude, Spot ID, Break");
      $th.attr("colspan", 5);

      const $tbody = $("<tbody></tbody>");
      $table.append($tbody);

      var boo = function () {
        window.alert('boo!');
      };

      setTimeout(function () {
      }, 2000);

      const $search = $("#search");
      $search.focus();
      $search.blur(function () {
        const search = $search.val();
        $tbody.empty();

        get("http://localhost:8000/data?search=" + search);
      });
      var get = function (url) {

        $.get(url, function (data) {

          for (i = 0; i < data.length; i++) {
            const datum = data[i];
            console.log(datum.name);

            const $tr = $("<tr></tr>");
            $tbody.append($tr);
            $tr.append("<td>" + datum.countyName + "</td>");
            $tr.append("<td>" + datum.latitude + "</td>");
            $tr.append("<td>" + datum.longitude + "</td>");
            $tr.append("<td>" + datum.spot_id + "</td>");
            $tr.append("<td>" + datum.spot_name + "</td>");
          }
        });
      }
      get("http://localhost:8000/data");

      $container.append($table);
    });
  </script>
</body>

</html>